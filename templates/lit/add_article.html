<!DOCTYPE html>

{% extends 'lit/base.html' %}
{% load staticfiles %}

{% block title_block %}
{% endblock %}


{% block body_block %}
	<h1 class="display-3">Add a new Analysis</h1>
	{% if registered %}
		<strong>Article uploaded successfully!</strong>
		<a href="{% url 'index' %}">Return to the homepage.</a><br />
	{% else %}
		<strong>Write your article here!</strong><br />
		<form id="article_form" method="post" action="{% url 'add_article' user.username %}"
			enctype="multipart/form-data">

		{% csrf_token %}
		<style>
		html, body{ height: 100%; }
		body{
		background: #ffff;
		display: flex; align-items: left; }

		textarea{
			display: block;
			box-sizing: padding-box;
			overflow: hidden;
			padding: 5px;
			height: 33px;
			width: 500px;
			font-size: 14px;
			margin: 10px auto;
			border-radius: 6px;
			box-shadow: 2px 2px 8px rgba(black, .3);
			border: 1;
		}
		
		textarea[name=analysis] {   
			height: 200px;
		}   
		</style>
		<script>
			// Applied globally on all textareas with the "autoExpand" class
			$(document).one('focus.autoExpand', 'textarea.autoExpand', function(){
				var savedValue = this.value;
				this.value = '';
				this.baseScrollHeight = this.scrollHeight;
				this.value = savedValue;
			 }).on('input.autoExpand', 'textarea.autoExpand', function(){
				var minRows = this.getAttribute('data-min-rows')|1, rows;
				this.rows = minRows;
				rows = Math.ceil((this.scrollHeight - this.baseScrollHeight) / 16);
				this.rows = minRows + rows;
			});
		</script>

		<!-- Display each form -->
		{{ article_form.as_p }}


		<!-- Provide a button to click to submit the form. -->
		<input type="submit" name="submit" value="Register" />
		</form>
	{% endif %}
{% endblock %}
